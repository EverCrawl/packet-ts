!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).packet={})}(this,(function(t){"use strict";var e=function(){function t(t){this.pointer=0,this.arrayView=new Uint8Array(t),this.view=new DataView(t),this.decoder=new TextDecoder}return t.prototype.advance=function(t){if(this.pointer+=t,this.pointer>this.view.byteLength)throw new Error("Out of bounds");return this.pointer-t},t.prototype.read_uint8=function(){return this.view.getUint8(this.advance(1))},t.prototype.read_uint16=function(){return this.view.getUint16(this.advance(2),!0)},t.prototype.read_uint32=function(){return this.view.getUint32(this.advance(4),!0)},t.prototype.read_int8=function(){return this.view.getInt8(this.advance(1))},t.prototype.read_int16=function(){return this.view.getInt16(this.advance(2),!0)},t.prototype.read_int32=function(){return this.view.getInt32(this.advance(4),!0)},t.prototype.read_float=function(){return this.view.getFloat32(this.advance(4),!0)},t.prototype.read_string=function(t){var e=this.advance(t);return this.decoder.decode(this.arrayView.slice(e,e+t))},t.prototype.read_bytes=function(t){var e=this.advance(t);return this.arrayView.slice(e,e+t)},t}(),i=function(){function t(){this.encoder=new TextEncoder,this.byteLength=0,this.buffer=new Uint8Array(1024)}return t.prototype.encode=function(t){return this.byteLength=this.encoder.encodeInto(t,this.buffer).written,this.byteLength},t.prototype.getInto=function(t,e){t.set(this.buffer.slice(0,this.byteLength),e)},t}(),n=function(){function t(t){this.pointer=0;var e=t instanceof ArrayBuffer?t:new ArrayBuffer(null!=t?t:0);this.arrayView=new Uint8Array(e),this.view=new DataView(e),this.encoder=new i}return t.prototype.ensure=function(t){if(!(this.view.byteLength>=this.pointer+t)){var e=new ArrayBuffer(this.view.byteLength+2*t),i=new Uint8Array(e);i.set(this.arrayView),this.arrayView=i,this.view=new DataView(e)}},t.prototype.advance=function(t){return this.pointer+=t,this.pointer-t},t.prototype.write_uint8=function(t){this.ensure(1),this.view.setUint8(this.advance(1),t)},t.prototype.write_uint16=function(t){this.ensure(2),this.view.setUint16(this.advance(2),t,!0)},t.prototype.write_uint32=function(t){this.ensure(4),this.view.setUint32(this.advance(4),t,!0)},t.prototype.write_int8=function(t){this.ensure(1),this.view.setInt8(this.advance(1),t)},t.prototype.write_int16=function(t){this.ensure(2),this.view.setInt16(this.advance(2),t,!0)},t.prototype.write_int32=function(t){this.ensure(4),this.view.setInt32(this.advance(4),t,!0)},t.prototype.write_float=function(t){this.ensure(4),this.view.setFloat32(this.advance(4),t,!0)},t.prototype.write_string=function(t){var e=this.encoder.encode(t);this.ensure(e),this.encoder.getInto(this.arrayView,this.advance(e))},t.prototype.write_bytes=function(t){this.ensure(t.byteLength),this.arrayView.set(t,this.advance(t.byteLength))},t.prototype.finish=function(){return this.view.buffer.slice(0,this.pointer)},t}();t.Reader=e,t.Writer=n,Object.defineProperty(t,"__esModule",{value:!0})}));
